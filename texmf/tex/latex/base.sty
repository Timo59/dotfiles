\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{base}[2025/05/25 LaTeX package for basic packages and commands]

\RequirePackage{amsmath}	% Mathematical environments
\RequirePackage{amssymb}	% Mathematical symbols
\RequirePackage{amsthm}	% Enhancing theorem-style environments
\RequirePackage{bm}		% Bold math symbols
\RequirePackage{mathtools} 	% Mathematical typesetting; \DeclarePairedDelimiter
%\RequirePackage{parskip}		% Paragraph layout
\RequirePackage{setspace}	% Provides double and one-and-a-half spacing based on font size
\onehalfspacing

\RequirePackage{subfiles}
	\ifSubfilesClassLoaded{%
		}%
		{\renewcommand{\thesection}{\Roman{section}}%
		}%

%%%%%% MACROS
	
%%%%%% SETS
	%%% BASIC
		\newcommand*{\N}{\mathbb{N}} 							% Natural numbers (without 0)
		\newcommand*{\Nn}{\mathbb{N}_{0}} 					% Natural numbers with 0
		\newcommand*{\Z}{\mathbb{Z}} 							% Integer numbers
		\newcommand*{\Q}{\mathbb{Q}}							% Rational numbers
		\newcommand*{\R}{\mathbb{R}}							% Real numbers
		\newcommand*{\C}{\mathbb{C}}							% Complex numbers
		\newcommand*{\F}{\mathbb{F}}								% Field
		\let\Re\relax
		\DeclareMathOperator{\Re}{Re}							% Real part of a complex number
		\let\Im\relax
		\DeclareMathOperator{\Im}{Im}								% Imaginary part of a complex number
		\newcommand*{\hil}{\mathcal{H}} 							% Hilbert space
		\newcommand*{\id}{I} 											% Identity operator
		\newcommand*{\linear}[1]{\mathcal{L}(#1)}			% Linear operators
		\newcommand*{\bounded}[1]{\mathcal{B}(#1)} 		% Bounded linear operators
		\newcommand*{\trclass}[1]{\mathcal{B}_{1}(#1)} 	% Trace class operators
		\DeclareMathOperator{\Mat}{Mat} 							% Matrices
		\DeclareMathOperator{\Herm}{Herm}
		\newcommand*{\herm}[1]{\Herm_{#1}}					% Hermitian matrices
		\DeclareMathOperator{\PSD}{PSD}
		\newcommand*{\psd}[1]{\PSD_{#1}}						% Positive semidefinite matrices
		\DeclareMathOperator*{\rk}{rk}								% Operator rank
		\DeclareMathOperator*{\sign}{sign}						% Sign of a number
		\DeclareMathOperator*{\argmax}{arg\,max}			% Argument of the function's maxima
		\DeclareMathOperator*{\argmin}{arg\,min}				% Argument of the function's minima
		\DeclareMathOperator*{\st}{subject\ to}					% Constraint introducer
		\newcommand*{\bigO}[1]{\mathcal{O}(#1)}			% Big-O notation

%%%%%% OPERATIONS
	%%% UNARY
		\DeclarePairedDelimiter\abs{\lvert}{\rvert}				% Absolute value
		\makeatletter		% Swap the definition of \abs* and \abs, 
		\let\oldabs\abs	% so that \abs resizes the size of the brackets,
		\def\abs{\@ifstar{\oldabs}{\oldabs*}}	% and the starred version does not.
		\makeatother
		%
		\DeclarePairedDelimiter\norm{\lVert}{\rVert}			% Norm
		\makeatletter
		\let\oldnorm\norm
		\def\norm{\@ifstar{\oldnorm}{\oldnorm*}}
		\makeatother
		%
		\DeclarePairedDelimiter\bra{\langle}{\rvert}			% Bra
		\makeatletter
		\let\oldbra\bra
		\def\bra{\@ifstar{\oldbra}{\oldbra*}}
		\makeatother
		%
		\DeclarePairedDelimiter\ket{\lvert}{\rangle}			% Ket
		\makeatletter
		\let\oldket\ket
		\def\ket{\@ifstar{\oldket}{\oldket}}
		\makeatother
		%
		\DeclareMathOperator{\tr}{tr} 								% Trace
		\newcommand{\adj}[1]{#1^\dag}							% Adjoint
		\newcommand{\cc}[1]{\overline{#1}}						% Complex conjugate
		
	%%% BINARY
		\makeatletter
		\newcommand{\braket}{\@ifstar\braket@star\braket@nostar}	% Braket
		\newcommand{\braket@nostar}[1]{%	% Auto-sized by default
			\@ifnextchar\bgroup
				{\braketInternal*{#1}}%
				{\braketInternal*{#1}{#1}}%	% If given only one argument, this will fill both places
		}
		\newcommand{\braket@star}[1]{%		% Normal-sized when starred
			\@ifnextchar\bgroup
				{\braketInternal{#1}}%		
				{\braketInternal{#1}{#1}}%
		}
		\makeatother
		%
		\makeatletter
		\newcommand{\inner}{\@ifstar\inner@star\inner@nostar}	% Inner product
		\newcommand{\inner@nostar}[1]{%	% Auto-sized by default
			\@ifnextchar\bgroup
				{\innerInternal*{#1}}%
				{\innerInternal*{#1}{#1}}%	% If given only one argument, this will fill both places
		}
		\newcommand{\inner@star}[1]{%		% Normal-sized when starred
			\@ifnextchar\bgroup
				{\innerInternal{#1}}%		
				{\innerInternal{#1}{#1}}%
		}
		\makeatother
		%
		\makeatletter
		\newcommand{\ketbra}{\@ifstar\ketbra@star\ketbra@nostar}	% Ketbra
		\newcommand{\ketbra@nostar}[1]{%	% Auto-sized by default
			\@ifnextchar\bgroup
				{\ketbraInternal*{#1}}%
				{\ketbraInternal*{#1}{#1}}%	% If given only one argument, this will fill both places
		}
		\newcommand{\ketbra@star}[1]{%		% Normal-sized when starred
			\@ifnextchar\bgroup
				{\ketbraInternal{#1}}%		
				{\ketbraInternal{#1}{#1}}%
		}
		\makeatother
		%
		\DeclarePairedDelimiterX\braketInternal[2]{\langle}{\rangle}{#1 \,\middle\vert\, #2}	% Braket
		\DeclarePairedDelimiterX\innerInternal[2]{\langle}{\rangle}{#1, #2}	% Inner product
		\DeclarePairedDelimiterX\ketbraInternal[2]{\lvert}{\rvert}{#1 \rangle \! \langle #2}	% Ketbra
		\DeclarePairedDelimiterX\expval[2]{\langle}{\rangle}{#2 \lvert #1 \rvert #2}					% Expectation value
		\makeatletter
		\let\oldexpval\expval
		\def\expval{\@ifstar{\oldexpval}{\oldexpval}}
		\makeatother
		%
		\DeclarePairedDelimiterX\matrixel[3]{\langle}{\rangle}{#1 \lvert #2 \rvert #3}				% Matrix element
		\makeatletter
		\let\oldmatrixel\matrixel
		\def\matrixel{\@ifstar{\oldmatrixel}{\oldmatrixel}}
		\makeatother
		
%%%%%% ENVIRONMENTS
		\newtheorem{definition}{Definition}[section]
		\newtheorem{theorem}{Theorem}[section]
		\newtheorem{lemma}[theorem]{Lemma}
		\newtheorem{corollary}[theorem]{Corollary}
		\newtheorem{example}{Example}[section]
		